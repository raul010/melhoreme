language: node_js
sudo: required

services:
  - docker

node_js:
  - "5.9.0"

before_install:
    - .bin/containers/build.sh
    - .bin/containers/run-db.sh -c "" -d ""
    # - docker exec -it w-db /melhoreme/.bin/containers/scripts/wait-connection.sh
    - docker exec -it w-db cd melhoreme
    - docker exec -it w-db ls -lha 
    - docker exec -d -it w-db gulp run 
    - docker exec -it w-db /melhoreme/.bin/containers/scripts/wait-server.sh 
     
before_script:
    - export DISPLAY=:99.0
    - sh -e /etc/init.d/xvfb start
    - sleep 5
    - docker exec -it w-db ./node_modules/protractor/bin/webdriver-manager update
    - docker exec -it w-db gulp pre-tests 

install: 
    - echo "Pronto"
script: 
    - docker exec -it w-db /melhoreme/.bin/containers/scripts/wait-selenium.sh 
    - docker exec -it w-db gulp e2e

#soh pro push

